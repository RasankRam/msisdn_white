(function(e){function t(t){for(var i,a,r=t[0],s=t[1],u=t[2],d=0,f=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);l&&l(t);while(f.length)f.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],i=!0,a=1;a<n.length;a++){var r=n[a];0!==o[r]&&(i=!1)}i&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={app:0},o={app:0},c=[];function r(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-1efdd091":"8365cc25"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-1efdd091":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-1efdd091":"753b2b3d"}[e]+".css",o=s.p+i,c=document.getElementsByTagName("link"),r=0;r<c.length;r++){var u=c[r],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===i||d===o))return t()}var f=document.getElementsByTagName("style");for(r=0;r<f.length;r++){u=f[r],d=u.getAttribute("data-href");if(d===i||d===o)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var i=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=i,delete a[e],l.parentNode.removeChild(l),n(c)},l.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(l)})).then((function(){a[e]=0})));var i=o[e];if(0!==i)if(i)t.push(i[2]);else{var c=new Promise((function(t,n){i=o[e]=[t,n]}));t.push(i[2]=c);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=r(e);var f=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",f.name="ChunkLoadError",f.type=i,f.request=a,n[1](f)}o[e]=void 0}};var l=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var l=d;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],c={name:"App",watch:{"$route.query":{handler:function(e){var t=this;this.$store.dispatch("change_loading",!0),this.$store.dispatch("fetch_devices",e).then((function(){t.$store.dispatch("change_loading",!1),setTimeout((function(){return t.$store.dispatch("collapse_table_handler")}))}))},deep:!0,immediate:!0}}},r=c,s=(n("5c0b"),n("2877")),u=Object(s["a"])(r,a,o,!1,null,null,null),d=u.exports,f=n("1dce"),l=n.n(f),p=n("58ca"),m=n("8832"),h=n.n(m),_=n("bc3a"),v=n.n(_),g=(n("d3b7"),n("7db0"),{state:{token:localStorage.getItem("user-token")||"",authUser:{}},getters:{authUser:function(e){return e.authUser},isAuthenticated:function(e){return!!e.token}},actions:{sign_in:function(e,t){var n=e.commit;return new Promise((function(e,i){v.a.post("/api/login",t).then((function(t){console.log(t.data.response),n("auth_success",t.data.response),e()})).catch((function(){return i()}))}))},register:function(e,t){var n=e.commit;return new Promise((function(e,i){v.a.post("/api/register",t).then((function(t){n("auth_success",t.data.response),e()})).catch((function(){return i()}))}))},update_profile:function(e,t){var n=e.commit;return new Promise((function(e,i){v.a.post("/api/update_profile",t).then((function(t){n("update_profile",t.data.response),e()})).catch((function(e){i(e)}))}))},logout:function(e){var t=e.commit;return new Promise((function(e){t("logout"),e()}))}},mutations:{auth_success:function(e,t){localStorage.setItem("user-token",t.token),v.a.defaults.headers.common["Authorization"]="Bearer "+t.token,e.token=t.token,e.authUser=t.user},update_profile:function(e,t){e.authUser=t},logout:function(e){e.token="",e.authUser={},delete v.a.defaults.headers.common["Authorization"],localStorage.removeItem("user-token")}}}),b=n("53ca"),k=(n("d81d"),n("99af"),n("4de4"),{state:{pagination_response:{}},getters:{pagination_response:function(e){return e.pagination_response}},actions:{fetch_all_msisdns:function(){return new Promise((function(e,t){v.a.get("/api/all_msisdns").then((function(t){e(t.data.response)})).catch((function(){return t()}))}))},fetch_devices:function(e,t){var n=e.commit;return new Promise((function(e,i){v.a.get("/api/devices",{params:t}).then((function(t){var i=t.data.response;i.data=i.data.map((function(e){return e.is_collapsed=!0,e.is_collapsable=0!==e.black_list.length,e})),n("set_pagination_response",i),e(i)})).catch((function(){return i()}))}))},fetch_my_devices:function(){return new Promise((function(e,t){v.a.get("/api/my_devices").then((function(t){e(t.data.response)})).catch((function(){return t()}))}))},call:function(e,t){e.commit;return new Promise((function(e,n){v.a.post("/api/call",t).then((function(){e()})).catch((function(){return n()}))}))},set_pagination_response:function(e,t){var n=e.commit;n("set_pagination_response",t)},create_device:function(e,t){var n=e.commit,i=Object.assign({},t);return new Promise((function(e,t){n("add_init_device",i),v.a.post("api/devices",i).then((function(t){n("add_success_device",t.data.response.id),e()})).catch((function(){n("add_failed_device"),t()}))}))},update_device:function(e,t){var n=e.commit;return n("update_init_device",t),new Promise((function(e,i){v.a.patch("/api/devices",t).then((function(){n("update_success_device",t.id),e()})).catch((function(){n("update_failed_device",t.id),i()}))}))},remove_device:function(e,t){var n=e.commit;return new Promise((function(e,i){v.a.delete("/api/devices/".concat(t)).then((function(){n("remove_device",t),e()})).catch((function(){return i()}))}))},create_device_msisdn:function(e,t){var n=e.commit;return new Promise((function(e,i){v.a.post("/api/devices/".concat(t.device_id,"/msisdn"),{msisdn:t.msisdn}).then((function(){n("create_device_msisdn",t),e()})).catch((function(){return i()}))}))},remove_device_msisdn:function(e,t){var n=e.commit;return new Promise((function(e,i){v.a.delete("/api/devices/".concat(t.device_id,"/").concat(t.msisdn)).then((function(){n("remove_device_msisdn",t),e()})).catch((function(){return i()}))}))}},mutations:{add_init_device:function(e,t){var n=Object.assign({},t);e.pagination_response.data.length>10&&e.pagination_response.data.pop(),n.creator=A.getters.isAuthenticated?this.getters.authUser:null,n.imsi={imsi:n.imsi},n.msisdn={msisdn:n.msisdn},n.is_collapsable=!1,n.is_collapsed=!0,n.created_at=new Date,n.updated_at=new Date,n.status="",n.black_list=[],e.pagination_response.data.unshift(n)},add_success_device:function(e,t){var n=e.pagination_response.data[0];n.id=t,n.status="success",setTimeout((function(){return n.status=""}),400)},add_failed_device:function(e){var t=e.pagination_response.data[0];t.status="failed",setTimeout((function(){setTimeout((function(){e.pagination_response.data.shift()}),200),t.status=""}),100)},update_init_device:function(e,t){var n=e.pagination_response.data.find((function(e){return+e.id===+t.id}));for(var i in t)"object"===Object(b["a"])(n[i])?n[i][i]=t[i]:n[i]=t[i];n.status="init",n.updated_at=new Date},update_success_device:function(e,t){var n=e.pagination_response.data.find((function(e){return e.id===t}));n.status="updated",setTimeout((function(){return n.status=""}),100)},update_failed_device:function(e,t){var n=e.pagination_response.data.find((function(e){return e.id===t}));n.status="failed",setTimeout((function(){return n.status=""}),100)},set_pagination_response:function(e,t){e.pagination_response=t},create_device:function(e,t){e.pagination_response.data.pop(),e.pagination_response.data.unshift(t)},remove_device:function(e,t){e.pagination_response.data=e.pagination_response.data.filter((function(e){return+e.id!==+t}))},create_device_msisdn:function(e,t){var n=e.pagination_response.data.find((function(e){return+e.id===+t.device_id}));n.is_collapsable=!0,n.black_list.unshift(t.msisdn)},remove_device_msisdn:function(e,t){var n=e.pagination_response.data.black_list.find((function(e){return+e.id===+t.device_id}));n.black_list=n.black_list.filter((function(e){return e!==t.msisdn})),0===n.black_list.length&&(n.is_collapsable=!1)}}}),w=(n("b0c0"),n("3ca3"),n("ddb0"),n("8c4f"));i["a"].use(w["a"]);var y=new w["a"]({base:"/",mode:"history",routes:[{path:"/",name:"index",component:function(){return n.e("chunk-1efdd091").then(n.bind(null,"5c93"))}}]});y.beforeEach((function(e,t,n){var i;A.dispatch("fetch_content",null!==(i=e.name)&&void 0!==i?i:"index"),n()}));var P=y,j={state:{content:[]},getters:{content:function(e){return e.content}},actions:{fetch_content:function(e,t){var n=e.commit;return new Promise((function(e,i){v.a.get("/api/pages/"+t).then((function(t){n("set_content",t.data.response),e()})).catch((function(){return i()}))}))},set_content_block_query:function(e,t){var n=e.commit,i=t.block,a=t.content;return new Promise((function(e,t){v.a.patch("/api/pages",{page:P.currentRoute.name,block:i,content:a}).then((function(){n("set_content_block",{block:i,content:a}),e()})).catch((function(){return t()}))}))},set_content_block:function(e,t){var n=e.commit,i=t.block,a=t.content;return new Promise((function(e){n("set_content_block",{block:i,content:a}),e()}))}},mutations:{set_content:function(e,t){e.content=t},set_content_block:function(e,t){var n=t.block,i=t.content;e.content.find((function(e){return e.block===n})).content=i}}},O=n("2f62"),S=n("0e44"),T=n("1157"),x=n.n(T);i["a"].use(O["a"]);var A=new O["a"].Store({state:{loading:!0},getters:{loading:function(e){return e.loading}},actions:{reset:function(){return new Promise((function(e,t){v.a.get("/api/reset").then((function(){e()})).catch((function(){return t()}))}))},change_loading:function(e,t){var n=e.commit;n("change_loading",t)},collapse_table_handler:function(){x()(".collapsable").click((function(e){"svg"!==e.target.nodeName&&(x()(this).hasClass("collapsed")?(x()(this).nextUntil("tr.collapsed").find("td").parent().find("td > div").slideDown("fast",(function(){var e=x()(this);e.replaceWith(e.contents())})),x()(this).removeClass("collapsed")):(x()(this).nextUntil("tr.collapsed").find("td").wrapInner('<div style="display: block;" />').parent().find("td > div").slideUp("fast"),x()(this).addClass("collapsed")))}))}},mutations:{change_loading:function(e,t){e.loading=t}},plugins:[Object(S["a"])()],modules:{auth:g,device:k,content:j}});i["a"].use(l.a),i["a"].use(p["a"]),i["a"].component("Paginate",h.a),i["a"].directive("visible",(function(e,t){e.style.visibility=t.value?"visible":"hidden"})),v.a.defaults.baseURL="http://localhost:9111/backend/";var U=localStorage.getItem("user-token");U&&(v.a.defaults.headers.common["Authorization"]="Bearer "+U),i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(d)},store:A,router:P}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"9c0c":function(e,t,n){}});
//# sourceMappingURL=app.7bbd85e8.js.map